<!DOCTYPE html>
<html lang="en-gb">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <link
      rel="stylesheet"
      href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
    />
    <link
      rel="stylesheet"
      href="https://use.fontawesome.com/releases/v5.8.1/css/all.css"
      integrity="sha384-50oBUHEmvpQ+1lW4y57PTFmhCaXp0ML5d60M1M7uH2+nqUivzIebhndOJK28anvf"
      crossorigin="anonymous"
    />
    <link
      href="https://fonts.googleapis.com/css?family=Open+Sans&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="style.css" />
    <title>Work Day Scheduler</title>
  </head>

  <body>
    
    <header class="jumbotron">
      <h1 class="display-3">Work Day Scheduler</h1>
      <p class="lead">A simple calendar app for scheduling your work day</p>
      <p id="currentDay" class="lead"></p>
    </header>
    <div class="container">
      <div class="row">
        <div class="col-2 hour">9AM</div>
        <textarea class="col-8 description" id="9"></textarea>
        <button class="col-2 saveBtn" data-time="9"><i class="fas fa-save"></i></button>
      </div>
      <div class="row">
        <div class="col-2 hour">10AM</div>
        <textarea class="col-8 description" id="10"></textarea>
        <button class="col-2 saveBtn" data-time="10"><i class="fas fa-save"></i></button>
      </div>
      <div class="row">
        <div class="col-2 hour">11AM</div>
        <textarea class="col-8 description" id="11"></textarea>
        <button class="col-2 saveBtn" data-time="11"><i class="fas fa-save"></i></button>
      </div>
      <div class="row">
        <div class="col-2 hour">12PM</div>
        <textarea class="col-8 description" id="12"></textarea>
        <button class="col-2 saveBtn" data-time="12"><i class="fas fa-save"></i></button>
      </div>
      <div class="row">
        <div class="col-2 hour">1PM</div>
        <textarea class="col-8 description" id="13"></textarea>
        <button class="col-2 saveBtn" data-time="13"><i class="fas fa-save"></i></button>
      </div>
      <div class="row">
        <div class="col-2 hour">2PM</div>
        <textarea class="col-8 description" id="14"></textarea>
        <button class="col-2 saveBtn" data-time="14"><i class="fas fa-save"></i></button>
      </div>
      <script src="script.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.24.0/moment.min.js"></script>
  </body>
</html>


// Get current date and time using Moment.js
var currentDay = moment().format("dddd, MMMM Do");
var currentHour = moment().hours();

// Display current date at the top of the page
$("#currentDay").text(currentDay);

function updateTime() {
    var currentTime = moment().format("h:mm:ss A");
    $("#currentTime").text(currentTime);
  }
  
  setInterval(updateTime, 1000);
  

// Define standard business hours (9am to 5pm)
var businessHours = [
  "9am",
  "10am",
  "11am",
  "12pm",
  "1pm",
  "2pm",
  "3pm",
  "4pm",
  "5pm",
];

// Loop through each business hour and create a timeblock element
businessHours.forEach(function(hour, index) {
  // Create row element for each timeblock
  var timeblockEl = $("<div>").addClass("row time-block");

  // Create column elements for time, text area, and save button
  var timeEl = $("<div>").addClass("col-2 hour").text(hour);
  var textAreaEl = $("<textarea>").addClass("col-8 description");

  // Color-code timeblock based on past, present, or future
  if (index + 9 < currentHour) {
    textAreaEl.addClass("past");
  } else if (index + 9 === currentHour) {
    textAreaEl.addClass("present");
  } else {
    textAreaEl.addClass("future");
  }

  var saveBtnEl = $("<button>")
    .addClass("col-2 saveBtn")
    .html("<i class='fas fa-save'></i>");

  // Load any saved events from local storage
  var savedEvent = localStorage.getItem(hour);
  if (savedEvent !== null) {
    textAreaEl.val(savedEvent);
  }

  // Add click event listener to save button
  saveBtnEl.on("click", function(event) {
    event.preventDefault();
    var eventText = textAreaEl.val();
    localStorage.setItem(hour, eventText);
  });

  // Append column elements to timeblock row
  timeblockEl.append(timeEl, textAreaEl, saveBtnEl);

  // Append timeblock row to container element
  $(".container").append(timeblockEl);
});
